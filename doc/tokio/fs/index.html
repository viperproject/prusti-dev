<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Asynchronous file and standard stream adaptation."><title>tokio::fs - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-a2c9cd1067f8b328.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-c4dbdcde0fbd8430.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-db279b6232be9c13.css"><link rel="stylesheet" disabled href="../../static.files/dark-cf923f49f397b216.css"><link rel="stylesheet" disabled href="../../static.files/ayu-be46fdc453a55015.css"><script src="../../static.files/storage-3891ce972e3a2bf8.js"></script><script defer src="../../static.files/main-98a684e84ae5b08b.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../tokio/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../tokio/index.html"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module fs</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">tokio</a>::<wbr><a class="mod" href="#">fs</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/tokio/fs/mod.rs.html#1-147">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Asynchronous file and standard stream adaptation.</p>
<p>This module contains utility methods and adapter types for input/output to
files or standard streams (<code>Stdin</code>, <code>Stdout</code>, <code>Stderr</code>), and
filesystem manipulation, for use within (and only within) a Tokio runtime.</p>
<p>Tasks run by <em>worker</em> threads should not block, as this could delay
servicing reactor events. Portable filesystem operations are blocking,
however. This module offers adapters which use a <code>blocking</code> annotation
to inform the runtime that a blocking operation is required. When
necessary, this allows the runtime to convert the current thread from a
<em>worker</em> to a <em>backup</em> thread, where blocking is acceptable.</p>
<h3 id="usage"><a href="#usage">Usage</a></h3>
<p>Where possible, users should prefer the provided asynchronous-specific
traits such as <a href="../io/trait.AsyncRead.html" title="trait tokio::io::AsyncRead"><code>AsyncRead</code></a>, or methods returning a <code>Future</code> or <code>Poll</code>
type. Adaptions also extend to traits like <code>std::io::Read</code> where methods
return <code>std::io::Result</code>. Be warned that these adapted methods may return
<code>std::io::ErrorKind::WouldBlock</code> if a <em>worker</em> thread can not be converted
to a <em>backup</em> thread immediately.</p>
<p><strong>Warning</strong>: These adapters may create a large number of temporary tasks,
especially when reading large files. When performing a lot of operations
in one batch, it may be significantly faster to use <a href="../task/fn.spawn_blocking.html" title="fn tokio::task::spawn_blocking"><code>spawn_blocking</code></a>
directly:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>tokio::fs::File;
<span class="kw">use </span>std::io::{BufReader, BufRead};
<span class="kw">async fn </span>count_lines(file: File) -&gt; <span class="prelude-ty">Result</span>&lt;usize, std::io::Error&gt; {
    <span class="kw">let </span>file = file.into_std().<span class="kw">await</span>;
    tokio::task::spawn_blocking(<span class="kw">move </span>|| {
        <span class="kw">let </span>line_count = BufReader::new(file).lines().count();
        <span class="prelude-val">Ok</span>(line_count)
    }).<span class="kw">await</span><span class="question-mark">?
</span>}</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.DirBuilder.html" title="struct tokio::fs::DirBuilder">DirBuilder</a></div><div class="desc docblock-short">A builder for creating directories in various manners.</div></li><li><div class="item-name"><a class="struct" href="struct.DirEntry.html" title="struct tokio::fs::DirEntry">DirEntry</a></div><div class="desc docblock-short">Entries returned by the <a href="struct.ReadDir.html" title="struct tokio::fs::ReadDir"><code>ReadDir</code></a> stream.</div></li><li><div class="item-name"><a class="struct" href="struct.File.html" title="struct tokio::fs::File">File</a></div><div class="desc docblock-short">A reference to an open file on the filesystem.</div></li><li><div class="item-name"><a class="struct" href="struct.OpenOptions.html" title="struct tokio::fs::OpenOptions">OpenOptions</a></div><div class="desc docblock-short">Options and flags which can be used to configure how a file is opened.</div></li><li><div class="item-name"><a class="struct" href="struct.ReadDir.html" title="struct tokio::fs::ReadDir">ReadDir</a></div><div class="desc docblock-short">Reads the entries in a directory.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.canonicalize.html" title="fn tokio::fs::canonicalize">canonicalize</a></div><div class="desc docblock-short">Returns the canonical, absolute form of a path with all intermediate
components normalized and symbolic links resolved.</div></li><li><div class="item-name"><a class="fn" href="fn.copy.html" title="fn tokio::fs::copy">copy</a></div><div class="desc docblock-short">Copies the contents of one file to another. This function will also copy the permission bits
of the original file to the destination file.
This function will overwrite the contents of to.</div></li><li><div class="item-name"><a class="fn" href="fn.create_dir.html" title="fn tokio::fs::create_dir">create_dir</a></div><div class="desc docblock-short">Creates a new, empty directory at the provided path.</div></li><li><div class="item-name"><a class="fn" href="fn.create_dir_all.html" title="fn tokio::fs::create_dir_all">create_dir_all</a></div><div class="desc docblock-short">Recursively creates a directory and all of its parent components if they
are missing.</div></li><li><div class="item-name"><a class="fn" href="fn.hard_link.html" title="fn tokio::fs::hard_link">hard_link</a></div><div class="desc docblock-short">Creates a new hard link on the filesystem.</div></li><li><div class="item-name"><a class="fn" href="fn.metadata.html" title="fn tokio::fs::metadata">metadata</a></div><div class="desc docblock-short">Given a path, queries the file system to get information about a file,
directory, etc.</div></li><li><div class="item-name"><a class="fn" href="fn.read.html" title="fn tokio::fs::read">read</a></div><div class="desc docblock-short">Reads the entire contents of a file into a bytes vector.</div></li><li><div class="item-name"><a class="fn" href="fn.read_dir.html" title="fn tokio::fs::read_dir">read_dir</a></div><div class="desc docblock-short">Returns a stream over the entries within a directory.</div></li><li><div class="item-name"><a class="fn" href="fn.read_link.html" title="fn tokio::fs::read_link">read_link</a></div><div class="desc docblock-short">Reads a symbolic link, returning the file that the link points to.</div></li><li><div class="item-name"><a class="fn" href="fn.read_to_string.html" title="fn tokio::fs::read_to_string">read_to_string</a></div><div class="desc docblock-short">Creates a future which will open a file for reading and read the entire
contents into a string and return said string.</div></li><li><div class="item-name"><a class="fn" href="fn.remove_dir.html" title="fn tokio::fs::remove_dir">remove_dir</a></div><div class="desc docblock-short">Removes an existing, empty directory.</div></li><li><div class="item-name"><a class="fn" href="fn.remove_dir_all.html" title="fn tokio::fs::remove_dir_all">remove_dir_all</a></div><div class="desc docblock-short">Removes a directory at this path, after removing all its contents. Use carefully!</div></li><li><div class="item-name"><a class="fn" href="fn.remove_file.html" title="fn tokio::fs::remove_file">remove_file</a></div><div class="desc docblock-short">Removes a file from the filesystem.</div></li><li><div class="item-name"><a class="fn" href="fn.rename.html" title="fn tokio::fs::rename">rename</a></div><div class="desc docblock-short">Renames a file or directory to a new name, replacing the original file if
<code>to</code> already exists.</div></li><li><div class="item-name"><a class="fn" href="fn.set_permissions.html" title="fn tokio::fs::set_permissions">set_permissions</a></div><div class="desc docblock-short">Changes the permissions found on a file or a directory.</div></li><li><div class="item-name"><a class="fn" href="fn.symlink.html" title="fn tokio::fs::symlink">symlink</a></div><div class="desc docblock-short">Creates a new symbolic link on the filesystem.</div></li><li><div class="item-name"><a class="fn" href="fn.symlink_metadata.html" title="fn tokio::fs::symlink_metadata">symlink_metadata</a></div><div class="desc docblock-short">Queries the file system metadata for a path.</div></li><li><div class="item-name"><a class="fn" href="fn.try_exists.html" title="fn tokio::fs::try_exists">try_exists</a></div><div class="desc docblock-short">Returns <code>Ok(true)</code> if the path points at an existing entity.</div></li><li><div class="item-name"><a class="fn" href="fn.write.html" title="fn tokio::fs::write">write</a></div><div class="desc docblock-short">Creates a future that will open a file for writing and write the entire
contents of <code>contents</code> to it.</div></li></ul></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="tokio" data-themes="" data-resource-suffix="" data-rustdoc-version="1.70.0-nightly (e3dfeeaa4 2023-03-07)" data-search-js="search-8a59a8356673ec1f.js" data-settings-js="settings-f0c5c39777a9a2f6.js" data-settings-css="settings-0bcba95ff279c1db.css" ></div></body></html>