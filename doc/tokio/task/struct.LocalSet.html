<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A set of tasks which are executed on the same thread."><meta name="keywords" content="rust, rustlang, rust-lang, LocalSet"><title>LocalSet in tokio::task - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-3d4cb87af9468701.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-1469fca9efc07bcb.css"><link rel="stylesheet" disabled href="../../static.files/dark-e9b7e5d8ba0dc980.css"><link rel="stylesheet" disabled href="../../static.files/ayu-0c1cf144240c9f40.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-799a64abec831f72.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../tokio/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../tokio/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">LocalSet</a></h2><div class="sidebar-elems"><section><h3><a href="#implementations">Methods</a></h3><ul class="block"><li><a href="#method.block_on">block_on</a></li><li><a href="#method.enter">enter</a></li><li><a href="#method.new">new</a></li><li><a href="#method.run_until">run_until</a></li><li><a href="#method.spawn_local">spawn_local</a></li></ul><h3><a href="#trait-implementations">Trait Implementations</a></h3><ul class="block"><li><a href="#impl-Debug-for-LocalSet">Debug</a></li><li><a href="#impl-Default-for-LocalSet">Default</a></li><li><a href="#impl-Drop-for-LocalSet">Drop</a></li><li><a href="#impl-Future-for-LocalSet">Future</a></li></ul><h3><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul class="block"><li><a href="#impl-RefUnwindSafe-for-LocalSet">!RefUnwindSafe</a></li><li><a href="#impl-Send-for-LocalSet">!Send</a></li><li><a href="#impl-Sync-for-LocalSet">!Sync</a></li><li><a href="#impl-Unpin-for-LocalSet">Unpin</a></li><li><a href="#impl-UnwindSafe-for-LocalSet">!UnwindSafe</a></li></ul><h3><a href="#blanket-implementations">Blanket Implementations</a></h3><ul class="block"><li><a href="#impl-Any-for-LocalSet">Any</a></li><li><a href="#impl-Borrow%3CT%3E-for-LocalSet">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E-for-LocalSet">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E-for-LocalSet">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E-for-LocalSet">Into&lt;U&gt;</a></li><li><a href="#impl-IntoFuture-for-LocalSet">IntoFuture</a></li><li><a href="#impl-TryFrom%3CU%3E-for-LocalSet">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E-for-LocalSet">TryInto&lt;U&gt;</a></li></ul></section><h2><a href="index.html">In tokio::task</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Struct <a href="../index.html">tokio</a>::<wbr><a href="index.html">task</a>::<wbr><a class="struct" href="#">LocalSet</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/tokio/task/local.rs.html#214-223">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><div class="item-decl"><pre class="rust struct"><code>pub struct LocalSet { /* private fields */ }</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A set of tasks which are executed on the same thread.</p>
<p>In some cases, it is necessary to run one or more futures that do not
implement <a href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html"><code>Send</code></a> and thus are unsafe to send between threads. In these
cases, a <a href="struct.LocalSet.html">local task set</a> may be used to schedule one or more <code>!Send</code>
futures to run together on the same thread.</p>
<p>For example, the following code will not compile:</p>

<div class="example-wrap compile_fail"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="comment">// `Rc` does not implement `Send`, and thus may not be sent between
    // threads safely.
    </span><span class="kw">let </span>unsend_data = Rc::new(<span class="string">&quot;my unsend data...&quot;</span>);

    <span class="kw">let </span>unsend_data = unsend_data.clone();
    <span class="comment">// Because the `async` block here moves `unsend_data`, the future is `!Send`.
    // Since `tokio::spawn` requires the spawned future to implement `Send`, this
    // will not compile.
    </span>tokio::spawn(<span class="kw">async move </span>{
        <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, unsend_data);
        <span class="comment">// ...
    </span>}).<span class="kw">await</span>.unwrap();
}</code></pre></div>
<h2 id="use-with-run_until"><a href="#use-with-run_until">Use with <code>run_until</code></a></h2>
<p>To spawn <code>!Send</code> futures, we can use a local task set to schedule them
on the thread calling <a href="../runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>. When running inside of the
local task set, we can use <a href="fn.spawn_local.html"><code>task::spawn_local</code></a>, which can spawn
<code>!Send</code> futures. For example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::rc::Rc;
<span class="kw">use </span>tokio::task;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>unsend_data = Rc::new(<span class="string">&quot;my unsend data...&quot;</span>);

    <span class="comment">// Construct a local task set that can run `!Send` futures.
    </span><span class="kw">let </span>local = task::LocalSet::new();

    <span class="comment">// Run the local task set.
    </span>local.run_until(<span class="kw">async move </span>{
        <span class="kw">let </span>unsend_data = unsend_data.clone();
        <span class="comment">// `spawn_local` ensures that the future is spawned on the local
        // task set.
        </span>task::spawn_local(<span class="kw">async move </span>{
            <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, unsend_data);
            <span class="comment">// ...
        </span>}).<span class="kw">await</span>.unwrap();
    }).<span class="kw">await</span>;
}</code></pre></div>
<p><strong>Note:</strong> The <code>run_until</code> method can only be used in <code>#[tokio::main]</code>,
<code>#[tokio::test]</code> or directly inside a call to <a href="../runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>. It
cannot be used inside a task spawned with <code>tokio::spawn</code>.</p>
<h3 id="awaiting-a-localset"><a href="#awaiting-a-localset">Awaiting a <code>LocalSet</code></a></h3>
<p>Additionally, a <code>LocalSet</code> itself implements <code>Future</code>, completing when
<em>all</em> tasks spawned on the <code>LocalSet</code> complete. This can be used to run
several futures on a <code>LocalSet</code> and drive the whole set until they
complete. For example,</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>tokio::{task, time};
<span class="kw">use </span>std::rc::Rc;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>unsend_data = Rc::new(<span class="string">&quot;world&quot;</span>);
    <span class="kw">let </span>local = task::LocalSet::new();

    <span class="kw">let </span>unsend_data2 = unsend_data.clone();
    local.spawn_local(<span class="kw">async move </span>{
        <span class="comment">// ...
        </span><span class="macro">println!</span>(<span class="string">&quot;hello {}&quot;</span>, unsend_data2)
    });

    local.spawn_local(<span class="kw">async move </span>{
        time::sleep(time::Duration::from_millis(<span class="number">100</span>)).<span class="kw">await</span>;
        <span class="macro">println!</span>(<span class="string">&quot;goodbye {}&quot;</span>, unsend_data)
    });

    <span class="comment">// ...

    </span>local.<span class="kw">await</span>;
}</code></pre></div>
<p><strong>Note:</strong> Awaiting a <code>LocalSet</code> can only be done inside
<code>#[tokio::main]</code>, <code>#[tokio::test]</code> or directly inside a call to
<a href="../runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>. It cannot be used inside a task spawned with
<code>tokio::spawn</code>.</p>
<h3 id="use-inside-tokiospawn"><a href="#use-inside-tokiospawn">Use inside <code>tokio::spawn</code></a></h3>
<p>The two methods mentioned above cannot be used inside <code>tokio::spawn</code>, so
to spawn <code>!Send</code> futures from inside <code>tokio::spawn</code>, we need to do
something else. The solution is to create the <code>LocalSet</code> somewhere else,
and communicate with it using an <a href="../sync/mpsc/index.html"><code>mpsc</code></a> channel.</p>
<p>The following example puts the <code>LocalSet</code> inside a new thread.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>tokio::runtime::Builder;
<span class="kw">use </span>tokio::sync::{mpsc, oneshot};
<span class="kw">use </span>tokio::task::LocalSet;

<span class="comment">// This struct describes the task you want to spawn. Here we include
// some simple examples. The oneshot channel allows sending a response
// to the spawner.
</span><span class="attr">#[derive(Debug)]
</span><span class="kw">enum </span>Task {
    PrintNumber(u32),
    AddOne(u32, oneshot::Sender&lt;u32&gt;),
}

<span class="attr">#[derive(Clone)]
</span><span class="kw">struct </span>LocalSpawner {
   send: mpsc::UnboundedSender&lt;Task&gt;,
}

<span class="kw">impl </span>LocalSpawner {
    <span class="kw">pub fn </span>new() -&gt; <span class="self">Self </span>{
        <span class="kw">let </span>(send, <span class="kw-2">mut </span>recv) = mpsc::unbounded_channel();

        <span class="kw">let </span>rt = Builder::new_current_thread()
            .enable_all()
            .build()
            .unwrap();

        std::thread::spawn(<span class="kw">move </span>|| {
            <span class="kw">let </span>local = LocalSet::new();

            local.spawn_local(<span class="kw">async move </span>{
                <span class="kw">while let </span><span class="prelude-val">Some</span>(new_task) = recv.recv().<span class="kw">await </span>{
                    tokio::task::spawn_local(run_task(new_task));
                }
                <span class="comment">// If the while loop returns, then all the LocalSpawner
                // objects have been dropped.
            </span>});

            <span class="comment">// This will return once all senders are dropped and all
            // spawned tasks have returned.
            </span>rt.block_on(local);
        });

        <span class="self">Self </span>{
            send,
        }
    }

    <span class="kw">pub fn </span>spawn(<span class="kw-2">&amp;</span><span class="self">self</span>, task: Task) {
        <span class="self">self</span>.send.send(task).expect(<span class="string">&quot;Thread with LocalSet has shut down.&quot;</span>);
    }
}

<span class="comment">// This task may do !Send stuff. We use printing a number as an example,
// but it could be anything.
//
// The Task struct is an enum to support spawning many different kinds
// of operations.
</span><span class="kw">async fn </span>run_task(task: Task) {
    <span class="kw">match </span>task {
        Task::PrintNumber(n) =&gt; {
            <span class="macro">println!</span>(<span class="string">&quot;{}&quot;</span>, n);
        },
        Task::AddOne(n, response) =&gt; {
            <span class="comment">// We ignore failures to send the response.
            </span><span class="kw">let _ </span>= response.send(n + <span class="number">1</span>);
        },
    }
}

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>spawner = LocalSpawner::new();

    <span class="kw">let </span>(send, response) = oneshot::channel();
    spawner.spawn(Task::AddOne(<span class="number">10</span>, send));
    <span class="kw">let </span>eleven = response.<span class="kw">await</span>.unwrap();
    <span class="macro">assert_eq!</span>(eleven, <span class="number">11</span>);
}</code></pre></div>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><div id="implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#350-667">source</a><a href="#impl-LocalSet" class="anchor"></a><h3 class="code-header">impl <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new" class="method has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#352-368">source</a><h4 class="code-header">pub fn <a href="#method.new" class="fnname">new</a>() -&gt; <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a> <a href="#" class="notable-traits" data-ty="LocalSet">ⓘ</a></h4></section></summary><div class="docblock"><p>Returns a new local task set.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.enter" class="method has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#376-381">source</a><h4 class="code-header">pub fn <a href="#method.enter" class="fnname">enter</a>(&amp;self) -&gt; <a class="struct" href="struct.LocalEnterGuard.html" title="struct tokio::task::LocalEnterGuard">LocalEnterGuard</a></h4></section></summary><div class="docblock"><p>Enters the context of this <code>LocalSet</code>.</p>
<p>The <a href="fn.spawn_local.html"><code>spawn_local</code></a> method will spawn tasks on the <code>LocalSet</code> whose
context you are inside.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.spawn_local" class="method has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#420-426">source</a><h4 class="code-header">pub fn <a href="#method.spawn_local" class="fnname">spawn_local</a>&lt;F&gt;(&amp;self, future: F) -&gt; <a class="struct" href="struct.JoinHandle.html" title="struct tokio::task::JoinHandle">JoinHandle</a>&lt;F::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>&gt; <a href="#" class="notable-traits" data-ty="JoinHandle&lt;F::Output&gt;">ⓘ</a><span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> + 'static,<br>&nbsp;&nbsp;&nbsp;&nbsp;F::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>: 'static,</span></h4></section></summary><div class="docblock"><p>Spawns a <code>!Send</code> task onto the local task set.</p>
<p>This task is guaranteed to be run on the current thread.</p>
<p>Unlike the free function <a href="fn.spawn_local.html"><code>spawn_local</code></a>, this method may be used to
spawn local tasks when the task set is <em>not</em> running. For example:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>tokio::task;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    <span class="kw">let </span>local = task::LocalSet::new();

    <span class="comment">// Spawn a future on the local set. This future will be run when
    // we call `run_until` to drive the task set.
    </span>local.spawn_local(<span class="kw">async </span>{
       <span class="comment">// ...
    </span>});

    <span class="comment">// Run the local task set.
    </span>local.run_until(<span class="kw">async move </span>{
        <span class="comment">// ...
    </span>}).<span class="kw">await</span>;

    <span class="comment">// When `run` finishes, we can spawn _more_ futures, which will
    // run in subsequent calls to `run_until`.
    </span>local.spawn_local(<span class="kw">async </span>{
       <span class="comment">// ...
    </span>});

    local.run_until(<span class="kw">async move </span>{
        <span class="comment">// ...
    </span>}).<span class="kw">await</span>;
}</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.block_on" class="method has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#493-498">source</a><h4 class="code-header">pub fn <a href="#method.block_on" class="fnname">block_on</a>&lt;F&gt;(&amp;self, rt: &amp;<a class="struct" href="../runtime/struct.Runtime.html" title="struct tokio::runtime::Runtime">Runtime</a>, future: F) -&gt; F::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a><span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,</span></h4></section></summary><div class="docblock"><p>Runs a future to completion on the provided runtime, driving any local
futures spawned on this task set on the current thread.</p>
<p>This runs the given future on the runtime, blocking until it is
complete, and yielding its resolved result. Any tasks or timers which
the future spawns internally will be executed on the runtime. The future
may also call <a href="fn.spawn_local.html"><code>spawn_local</code></a> to spawn_local additional local futures on the
current thread.</p>
<p>This method should not be called from an asynchronous context.</p>
<h5 id="panics"><a href="#panics">Panics</a></h5>
<p>This function panics if the executor is at capacity, if the provided
future panics, or if called within an asynchronous execution context.</p>
<h5 id="notes"><a href="#notes">Notes</a></h5>
<p>Since this function internally calls <a href="../runtime/struct.Runtime.html#method.block_on"><code>Runtime::block_on</code></a>, and drives
futures in the local task set inside that call to <code>block_on</code>, the local
futures may not use <a href="fn.block_in_place.html">in-place blocking</a>. If a blocking call needs to be
issued from a local task, the <a href="fn.spawn_blocking.html"><code>spawn_blocking</code></a> API may be used instead.</p>
<p>For example, this will panic:</p>

<div class="example-wrap should_panic"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="kw">use </span>tokio::runtime::Runtime;
<span class="kw">use </span>tokio::task;

<span class="kw">let </span>rt  = Runtime::new().unwrap();
<span class="kw">let </span>local = task::LocalSet::new();
local.block_on(<span class="kw-2">&amp;</span>rt, <span class="kw">async </span>{
    <span class="kw">let </span>join = task::spawn_local(<span class="kw">async </span>{
        <span class="kw">let </span>blocking_result = task::block_in_place(|| {
            <span class="comment">// ...
        </span>});
        <span class="comment">// ...
    </span>});
    join.<span class="kw">await</span>.unwrap();
})</code></pre></div>
<p>This, however, will not panic:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>tokio::runtime::Runtime;
<span class="kw">use </span>tokio::task;

<span class="kw">let </span>rt  = Runtime::new().unwrap();
<span class="kw">let </span>local = task::LocalSet::new();
local.block_on(<span class="kw-2">&amp;</span>rt, <span class="kw">async </span>{
    <span class="kw">let </span>join = task::spawn_local(<span class="kw">async </span>{
        <span class="kw">let </span>blocking_result = task::spawn_blocking(|| {
            <span class="comment">// ...
        </span>}).<span class="kw">await</span>;
        <span class="comment">// ...
    </span>});
    join.<span class="kw">await</span>.unwrap();
})</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.run_until" class="method has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#528-537">source</a><h4 class="code-header">pub async fn <a href="#method.run_until" class="fnname">run_until</a>&lt;F&gt;(&amp;self, future: F) -&gt; F::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a><span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,</span></h4></section></summary><div class="docblock"><p>Runs a future to completion on the local set, returning its output.</p>
<p>This returns a future that runs the given future with a local set,
allowing it to call <a href="fn.spawn_local.html"><code>spawn_local</code></a> to spawn additional <code>!Send</code> futures.
Any local futures spawned on the local set will be driven in the
background until the future passed to <code>run_until</code> completes. When the future
passed to <code>run</code> finishes, any local futures which have not completed
will remain on the local set, and will be driven on subsequent calls to
<code>run_until</code> or when <a href="#awaiting-a-localset">awaiting the local set</a> itself.</p>
<h5 id="examples"><a href="#examples">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>tokio::task;

<span class="attr">#[tokio::main]
</span><span class="kw">async fn </span>main() {
    task::LocalSet::new().run_until(<span class="kw">async </span>{
        task::spawn_local(<span class="kw">async move </span>{
            <span class="comment">// ...
        </span>}).<span class="kw">await</span>.unwrap();
        <span class="comment">// ...
    </span>}).<span class="kw">await</span>;
}</code></pre></div>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Debug-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#740-744">source</a><a href="#impl-Debug-for-LocalSet" class="anchor"></a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#741-743">source</a><a href="#method.fmt" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt" class="fnname">fmt</a>(&amp;self, fmt: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Default-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#770-774">source</a><a href="#impl-Default-for-LocalSet" class="anchor"></a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.default" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#771-773">source</a><a href="#method.default" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default" class="fnname">default</a>() -&gt; <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a> <a href="#" class="notable-traits" data-ty="LocalSet">ⓘ</a></h4></section></summary><div class='docblock'>Returns the “default value” for a type. <a href="https://doc.rust-lang.org/nightly/core/default/trait.Default.html#tymethod.default">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Drop-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#776-799">source</a><a href="#impl-Drop-for-LocalSet" class="anchor"></a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html" title="trait core::ops::drop::Drop">Drop</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.drop" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#777-798">source</a><a href="#method.drop" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html#tymethod.drop" class="fnname">drop</a>(&amp;mut self)</h4></section></summary><div class='docblock'>Executes the destructor for this type. <a href="https://doc.rust-lang.org/nightly/core/ops/drop/trait.Drop.html#tymethod.drop">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Future-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#746-768">source</a><a href="#impl-Future-for-LocalSet" class="anchor"></a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Output" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Output" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" class="associatedtype">Output</a> = <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a></h4></section></summary><div class='docblock'>The type of value produced on completion.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.poll" class="method trait-impl has-srclink"><a class="srclink rightside" href="../../src/tokio/task/local.rs.html#749-767">source</a><a href="#method.poll" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#tymethod.poll" class="fnname">poll</a>(self: <a class="struct" href="https://doc.rust-lang.org/nightly/core/pin/struct.Pin.html" title="struct core::pin::Pin">Pin</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>Self&gt;, cx: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/task/wake/struct.Context.html" title="struct core::task::wake::Context">Context</a>&lt;'_&gt;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/task/poll/enum.Poll.html" title="enum core::task::poll::Poll">Poll</a>&lt;Self::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a>&gt;</h4></section></summary><div class='docblock'>Attempt to resolve the future to a final value, registering
the current task for wakeup if the value is not yet available. <a href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#tymethod.poll">Read more</a></div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe-for-LocalSet" class="impl has-srclink"><a href="#impl-RefUnwindSafe-for-LocalSet" class="anchor"></a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section><section id="impl-Send-for-LocalSet" class="impl has-srclink"><a href="#impl-Send-for-LocalSet" class="anchor"></a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section><section id="impl-Sync-for-LocalSet" class="impl has-srclink"><a href="#impl-Sync-for-LocalSet" class="anchor"></a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section><section id="impl-Unpin-for-LocalSet" class="impl has-srclink"><a href="#impl-Unpin-for-LocalSet" class="anchor"></a><h3 class="code-header">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section><section id="impl-UnwindSafe-for-LocalSet" class="impl has-srclink"><a href="#impl-UnwindSafe-for-LocalSet" class="anchor"></a><h3 class="code-header">impl !<a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.LocalSet.html" title="struct tokio::task::LocalSet">LocalSet</a></h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Any-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#200">source</a><a href="#impl-Any-for-LocalSet" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#201">source</a><a href="#method.type_id" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#211">source</a><a href="#impl-Borrow%3CT%3E-for-LocalSet" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#213">source</a></span><a href="#method.borrow" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</h4></section></summary><div class='docblock'>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#220">source</a><a href="#impl-BorrowMut%3CT%3E-for-LocalSet" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#221">source</a></span><a href="#method.borrow_mut" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T</h4></section></summary><div class='docblock'>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-From%3CT%3E-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#733">source</a><a href="#impl-From%3CT%3E-for-LocalSet" class="anchor"></a><h3 class="code-header">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#736">source</a></span><a href="#method.from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#717">source</a><a href="#impl-Into%3CU%3E-for-LocalSet" class="anchor"></a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#725">source</a></span><a href="#method.into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-IntoFuture-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/future/into_future.rs.html#132">source</a><a href="#impl-IntoFuture-for-LocalSet" class="anchor"></a><h3 class="code-header">impl&lt;F&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html" title="trait core::future::into_future::IntoFuture">IntoFuture</a> for F<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;F: <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Output-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Output-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html#associatedtype.Output" class="associatedtype">Output</a> = &lt;F as <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html" title="trait core::future::future::Future">Future</a>&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output" title="type core::future::future::Future::Output">Output</a></h4></section></summary><div class='docblock'>The output that the future will produce on completion.</div></details><details class="rustdoc-toggle" open><summary><section id="associatedtype.IntoFuture" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.IntoFuture" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html#associatedtype.IntoFuture" class="associatedtype">IntoFuture</a> = F</h4></section></summary><div class='docblock'>Which kind of future are we turning this into?</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into_future" class="method trait-impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/future/into_future.rs.html#136">source</a><a href="#method.into_future" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html#tymethod.into_future" class="fnname">into_future</a>(self) -&gt; &lt;F as <a class="trait" href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html" title="trait core::future::into_future::IntoFuture">IntoFuture</a>&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html#associatedtype.IntoFuture" title="type core::future::into_future::IntoFuture::IntoFuture">IntoFuture</a></h4></section></summary><div class='docblock'>Creates a future from a value. <a href="https://doc.rust-lang.org/nightly/core/future/into_future/trait.IntoFuture.html#tymethod.into_future">Read more</a></div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#775">source</a><a href="#impl-TryFrom%3CU%3E-for-LocalSet" class="anchor"></a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error-1" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#781">source</a></span><a href="#method.try_from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E-for-LocalSet" class="impl has-srclink"><a class="srclink rightside" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#760">source</a><a href="#impl-TryInto%3CU%3E-for-LocalSet" class="anchor"></a><h3 class="code-header">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T<span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error" class="associatedtype trait-impl has-srclink"><a href="#associatedtype.Error" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'>The type returned in the event of a conversion error.</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#766">source</a></span><a href="#method.try_into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'>Performs the conversion.</div></details></div></details></div><script type="text/json" id="notable-traits-data">{"JoinHandle<F::Output>":"<h3>Notable traits for <code><a class=\"struct\" href=\"struct.JoinHandle.html\" title=\"struct tokio::task::JoinHandle\">JoinHandle</a>&lt;T&gt;</code></h3><pre class=\"content\"><code><span class=\"where fmt-newline\">impl&lt;T&gt; <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html\" title=\"trait core::future::future::Future\">Future</a> for <a class=\"struct\" href=\"struct.JoinHandle.html\" title=\"struct tokio::task::JoinHandle\">JoinHandle</a>&lt;T&gt;</span><span class=\"where fmt-newline\">    type <a href=\"https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output\" class=\"associatedtype\">Output</a> = <a class=\"enum\" href=\"https://doc.rust-lang.org/nightly/core/result/enum.Result.html\" title=\"enum core::result::Result\">Result</a>&lt;T, <a class=\"struct\" href=\"struct.JoinError.html\" title=\"struct tokio::task::JoinError\">JoinError</a>&gt;;</span>","LocalSet":"<h3>Notable traits for <code><a class=\"struct\" href=\"struct.LocalSet.html\" title=\"struct tokio::task::LocalSet\">LocalSet</a></code></h3><pre class=\"content\"><code><span class=\"where fmt-newline\">impl <a class=\"trait\" href=\"https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html\" title=\"trait core::future::future::Future\">Future</a> for <a class=\"struct\" href=\"struct.LocalSet.html\" title=\"struct tokio::task::LocalSet\">LocalSet</a></span><span class=\"where fmt-newline\">    type <a href=\"https://doc.rust-lang.org/nightly/core/future/future/trait.Future.html#associatedtype.Output\" class=\"associatedtype\">Output</a> = <a class=\"primitive\" href=\"https://doc.rust-lang.org/nightly/std/primitive.unit.html\">()</a>;</span>"}</script></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="tokio" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.0-nightly (96ddd32c4 2022-11-14)" data-search-js="search-39ee4160c7dc16c9.js" data-settings-js="settings-7873449fa8c00e11.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>