<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="An interface for controlling asynchronous communication ports"><meta name="keywords" content="rust, rustlang, rust-lang, termios"><title>nix::sys::termios - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-52c5db6f6f352e54.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../../static.files/light-4743e13df3dfe8c4.css"><link rel="stylesheet" disabled href="../../../static.files/dark-0e1b889528bd466b.css"><link rel="stylesheet" disabled href="../../../static.files/ayu-65289d5d067c7c66.css"><script id="default-settings" ></script><script src="../../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../../static.files/main-d2686a620d99aad7.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../nix/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2></h2></nav><nav class="sidebar"><a class="logo-container" href="../../../nix/index.html"><img class="rust-logo" src="../../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></a><h2 class="location"><a href="#">Module termios</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#constants">Constants</a></li><li><a href="#functions">Functions</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../index.html">nix</a>::<wbr><a href="../index.html">sys</a>::<wbr><a class="mod" href="#">termios</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../../src/nix/sys/termios.rs.html#1-1227">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>An interface for controlling asynchronous communication ports</p>
<p>This interface provides a safe wrapper around the termios subsystem defined by POSIX. The
underlying types are all implemented in libc for most platforms and either wrapped in safer
types here or exported directly.</p>
<p>If you are unfamiliar with the <code>termios</code> API, you should first read the
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/termios.h.html">API documentation</a> and
then come back to understand how <code>nix</code> safely wraps it.</p>
<p>It should be noted that this API incurs some runtime overhead above the base <code>libc</code> definitions.
As this interface is not used with high-bandwidth information, this should be fine in most
cases. The primary cost when using this API is that the <code>Termios</code> datatype here duplicates the
standard fields of the underlying <code>termios</code> struct and uses safe type wrappers for those fields.
This means that when crossing the FFI interface to the underlying C library, data is first
copied into the underlying <code>termios</code> struct, then the operation is done, and the data is copied
back (with additional sanity checking) into the safe wrapper types. The <code>termios</code> struct is
relatively small across all platforms (on the order of 32-64 bytes).</p>
<p>The following examples highlight some of the API use cases such that users coming from using C
or reading the standard documentation will understand how to use the safe API exposed here.</p>
<p>Example disabling processing of the end-of-file control character:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>termios.control_chars[VEOF <span class="kw">as </span>usize] = _POSIX_VDISABLE;</code></pre></div>
<p>The flags within <code>Termios</code> are defined as bitfields using the <code>bitflags</code> crate. This provides
an interface for working with bitfields that is similar to working with the raw unsigned
integer types but offers type safety because of the internal checking that values will always
be a valid combination of the defined flags.</p>
<p>An example showing some of the basic operations for interacting with the control flags:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>termios.control_flags &amp; ControlFlags::CSIZE == ControlFlags::CS5;
termios.control_flags |= ControlFlags::CS5;</code></pre></div>
<h2 id="baud-rates"><a href="#baud-rates">Baud rates</a></h2>
<p>This API is not consistent across platforms when it comes to <code>BaudRate</code>: Android and Linux both
only support the rates specified by the <code>BaudRate</code> enum through their termios API while the BSDs
support arbitrary baud rates as the values of the <code>BaudRate</code> enum constants are the same integer
value of the constant (<code>B9600</code> == <code>9600</code>). Therefore the <code>nix::termios</code> API uses the following
conventions:</p>
<ul>
<li><code>cfgetispeed()</code> - Returns <code>u32</code> on BSDs, <code>BaudRate</code> on Android/Linux</li>
<li><code>cfgetospeed()</code> - Returns <code>u32</code> on BSDs, <code>BaudRate</code> on Android/Linux</li>
<li><code>cfsetispeed()</code> - Takes <code>u32</code> or <code>BaudRate</code> on BSDs, <code>BaudRate</code> on Android/Linux</li>
<li><code>cfsetospeed()</code> - Takes <code>u32</code> or <code>BaudRate</code> on BSDs, <code>BaudRate</code> on Android/Linux</li>
<li><code>cfsetspeed()</code> - Takes <code>u32</code> or <code>BaudRate</code> on BSDs, <code>BaudRate</code> on Android/Linux</li>
</ul>
<p>The most common use case of specifying a baud rate using the enum will work the same across
platforms:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code>cfsetispeed(<span class="kw-2">&amp;mut </span>t, BaudRate::B9600).unwrap();
cfsetospeed(<span class="kw-2">&amp;mut </span>t, BaudRate::B9600).unwrap();
cfsetspeed(<span class="kw-2">&amp;mut </span>t, BaudRate::B9600).unwrap();</code></pre></div>
<p>Additionally round-tripping baud rates is consistent across platforms:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>speed = cfgetispeed(<span class="kw-2">&amp;</span>t);
<span class="macro">assert_eq!</span>(speed, cfgetospeed(<span class="kw-2">&amp;</span>t));
cfsetispeed(<span class="kw-2">&amp;mut </span>t, speed).unwrap();</code></pre></div>
<p>On non-BSDs, <code>cfgetispeed()</code> and <code>cfgetospeed()</code> both return a <code>BaudRate</code>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">assert_eq!</span>(cfgetispeed(<span class="kw-2">&amp;</span>t), BaudRate::B9600);
<span class="macro">assert_eq!</span>(cfgetospeed(<span class="kw-2">&amp;</span>t), BaudRate::B9600);</code></pre></div>
<p>But on the BSDs, <code>cfgetispeed()</code> and <code>cfgetospeed()</code> both return <code>u32</code>s:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="macro">assert_eq!</span>(cfgetispeed(<span class="kw-2">&amp;</span>t), <span class="number">9600u32</span>);
<span class="macro">assert_eq!</span>(cfgetospeed(<span class="kw-2">&amp;</span>t), <span class="number">9600u32</span>);</code></pre></div>
<p>It’s trivial to convert from a <code>BaudRate</code> to a <code>u32</code> on BSDs:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code><span class="macro">assert_eq!</span>(cfgetispeed(<span class="kw-2">&amp;</span>t), BaudRate::B9600.into());
<span class="macro">assert_eq!</span>(u32::from(BaudRate::B9600), <span class="number">9600u32</span>);</code></pre></div>
<p>And on BSDs you can specify arbitrary baud rates (<strong>note</strong> this depends on hardware support)
by specifying baud rates directly using <code>u32</code>s:</p>

<div class="example-wrap ignore"><div class='tooltip'>ⓘ</div><pre class="rust rust-example-rendered"><code>cfsetispeed(<span class="kw-2">&amp;mut </span>t, <span class="number">9600u32</span>);
cfsetospeed(<span class="kw-2">&amp;mut </span>t, <span class="number">9600u32</span>);
cfsetspeed(<span class="kw-2">&amp;mut </span>t, <span class="number">9600u32</span>);</code></pre></div>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ControlFlags.html" title="nix::sys::termios::ControlFlags struct">ControlFlags</a></div><div class="item-right docblock-short">Flags for setting the control mode of a terminal</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.InputFlags.html" title="nix::sys::termios::InputFlags struct">InputFlags</a></div><div class="item-right docblock-short">Flags for configuring the input mode of a terminal</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.LocalFlags.html" title="nix::sys::termios::LocalFlags struct">LocalFlags</a></div><div class="item-right docblock-short">Flags for setting any local modes</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.OutputFlags.html" title="nix::sys::termios::OutputFlags struct">OutputFlags</a></div><div class="item-right docblock-short">Flags for configuring the output mode of a terminal</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.Termios.html" title="nix::sys::termios::Termios struct">Termios</a></div><div class="item-right docblock-short">Stores settings for the termios API</div></div></div><h2 id="enums" class="small-section-header"><a href="#enums">Enums</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.BaudRate.html" title="nix::sys::termios::BaudRate enum">BaudRate</a></div><div class="item-right docblock-short">Baud rates supported by the system.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.FlowArg.html" title="nix::sys::termios::FlowArg enum">FlowArg</a></div><div class="item-right docblock-short">Specify how transmission flow should be altered</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.FlushArg.html" title="nix::sys::termios::FlushArg enum">FlushArg</a></div><div class="item-right docblock-short">Specify a combination of the input and output buffers to flush</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.SetArg.html" title="nix::sys::termios::SetArg enum">SetArg</a></div><div class="item-right docblock-short">Specify when a port configuration change should occur.</div></div><div class="item-row"><div class="item-left module-item"><a class="enum" href="enum.SpecialCharacterIndices.html" title="nix::sys::termios::SpecialCharacterIndices enum">SpecialCharacterIndices</a></div><div class="item-right docblock-short">Indices into the <code>termios.c_cc</code> array for special characters.</div></div></div><h2 id="constants" class="small-section-header"><a href="#constants">Constants</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant.NCCS.html" title="nix::sys::termios::NCCS constant">NCCS</a></div></div><div class="item-row"><div class="item-left module-item"><a class="constant" href="constant._POSIX_VDISABLE.html" title="nix::sys::termios::_POSIX_VDISABLE constant">_POSIX_VDISABLE</a></div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.cfgetispeed.html" title="nix::sys::termios::cfgetispeed fn">cfgetispeed</a></div><div class="item-right docblock-short">Get input baud rate (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/cfgetispeed.html">cfgetispeed(3p)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.cfgetospeed.html" title="nix::sys::termios::cfgetospeed fn">cfgetospeed</a></div><div class="item-right docblock-short">Get output baud rate (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/cfgetospeed.html">cfgetospeed(3p)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.cfmakeraw.html" title="nix::sys::termios::cfmakeraw fn">cfmakeraw</a></div><div class="item-right docblock-short">Configures the port to something like the “raw” mode of the old Version 7 terminal driver (see
<a href="https://man7.org/linux/man-pages/man3/termios.3.html">termios(3)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.cfsetispeed.html" title="nix::sys::termios::cfsetispeed fn">cfsetispeed</a></div><div class="item-right docblock-short">Set input baud rate (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/cfsetispeed.html">cfsetispeed(3p)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.cfsetospeed.html" title="nix::sys::termios::cfsetospeed fn">cfsetospeed</a></div><div class="item-right docblock-short">Set output baud rate (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/cfsetospeed.html">cfsetospeed(3p)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.cfsetspeed.html" title="nix::sys::termios::cfsetspeed fn">cfsetspeed</a></div><div class="item-right docblock-short">Set both the input and output baud rates (see
<a href="https://www.freebsd.org/cgi/man.cgi?query=cfsetspeed">termios(3)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tcdrain.html" title="nix::sys::termios::tcdrain fn">tcdrain</a></div><div class="item-right docblock-short">Block until all output data is written (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/tcdrain.html">tcdrain(3p)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tcflow.html" title="nix::sys::termios::tcflow fn">tcflow</a></div><div class="item-right docblock-short">Suspend or resume the transmission or reception of data (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/tcflow.html">tcflow(3p)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tcflush.html" title="nix::sys::termios::tcflush fn">tcflush</a></div><div class="item-right docblock-short">Discard data in the output or input queue (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/tcflush.html">tcflush(3p)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tcgetattr.html" title="nix::sys::termios::tcgetattr fn">tcgetattr</a></div><div class="item-right docblock-short">Return the configuration of a port
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/tcgetattr.html">tcgetattr(3p)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tcgetsid.html" title="nix::sys::termios::tcgetsid fn">tcgetsid</a></div><div class="item-right docblock-short">Get the session controlled by the given terminal (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/tcgetsid.html">tcgetsid(3)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tcsendbreak.html" title="nix::sys::termios::tcsendbreak fn">tcsendbreak</a></div><div class="item-right docblock-short">Send a break for a specific duration (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/tcsendbreak.html">tcsendbreak(3p)</a>).</div></div><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.tcsetattr.html" title="nix::sys::termios::tcsetattr fn">tcsetattr</a></div><div class="item-right docblock-short">Set the configuration for a terminal (see
<a href="https://pubs.opengroup.org/onlinepubs/9699919799/functions/tcsetattr.html">tcsetattr(3p)</a>).</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="nix" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0-nightly (afaf3e07a 2023-01-14)" data-search-js="search-181581080540673f.js" data-settings-js="settings-a2afdefbb7c817f1.js" data-settings-css="settings-84508a86fe805444.css" ></div></body></html>